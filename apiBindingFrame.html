<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script>
    (function () {
      var API_URL = 'https://next.alterra.ai/api/faq/v1/';
      var headers = [];
      window.onload = function() {
        window.addEventListener('message', receiveMessage);
      };

      function dummyRecieve(msg) {
        msg.source.postMessage('Dummy says ' + Math.random().toString(36).slice(2), msg.origin)
      }

      function receiveMessage(msg) {
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = onResponse;
        xhttp.open('GET', API_URL + '?query=' + encodeURIComponent(msg.data), true);
        headers.forEach(function (header) {
          xhttp.setRequestHeader(header[0], header[1])
        });
        xhttp.send();
        document.getElementsByTagName('body')[0].appendChild(document.createTextNode(msg.data))

        function onResponse() {
          var data;
          if (this.readyState == 4 && this.status == 200) {
            data = JSON.parse(this.responseText);
            msg.source.postMessage(data[0].answer, msg.origin)
          }
        }
      }

      function hash(s){
        var char,
          hash = 0;
        if (s.length === 0) return hash;
        for (i = 0; i < s.length; i++) {
          char = s.charCodeAt(i);
          hash = ((hash<<5) - hash) + char;
          hash = hash & hash; // Convert to 32bit integer
        }
        return hash;
      }
    })();
  </script>
</head>
<body>

</body>
</html>